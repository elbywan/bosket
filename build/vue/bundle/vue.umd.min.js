!function(r,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("@bosket/core"),require("@bosket/tools")):"function"==typeof define&&define.amd?define(["@bosket/core","@bosket/tools"],t):"object"==typeof exports?exports["bosket-vue"]=t(require("@bosket/core"),require("@bosket/tools")):r["bosket-vue"]=t(r["bosket-core"],r["bosket-tools"])}("undefined"!=typeof self?self:this,function(r,t){return function(r){function t(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return r[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var e={};return t.m=r,t.c=e,t.d=function(r,e,n){t.o(r,e)||Object.defineProperty(r,e,{configurable:!1,enumerable:!0,get:n})},t.n=function(r){var e=r&&r.__esModule?function(){return r.default}:function(){return r};return t.d(e,"a",e),e},t.o=function(r,t){return Object.prototype.hasOwnProperty.call(r,t)},t.p="",t(t.s=43)}({0:function(t,e){t.exports=r},1:function(r,e){r.exports=t},16:function(r,t){function e(r,t){return function(){r&&r.apply(this,arguments),t&&t.apply(this,arguments)}}var n=/^(attrs|props|on|nativeOn|class|style|hook)$/;r.exports=function(r){return r.reduce(function(r,t){var o,s,i,a,u;for(i in t)if(o=r[i],s=t[i],o&&n.test(i))if("class"===i&&("string"==typeof o&&(u=o,r[i]=o={},o[u]=!0),"string"==typeof s&&(u=s,t[i]=s={},s[u]=!0)),"on"===i||"nativeOn"===i||"hook"===i)for(a in s)o[a]=e(o[a],s[a]);else if(Array.isArray(o))r[i]=o.concat(s);else if(Array.isArray(s))r[i]=[o].concat(s);else for(a in s)o[a]=s[a];else r[i]=t[i];return r},{})}},17:function(r,t,e){"use strict";e.d(t,"a",function(){return i});var n=e(47);e.d(t,"b",function(){return n.a});var o=e(48);e.d(t,"d",function(){return o.a});var s=e(49);e.d(t,"c",function(){return s.a});var i=function(){for(var r=arguments.length,t=Array(r),e=0;e<r;e++)t[e]=arguments[e];return function(r){return t.reduce(function(r,t){return t(r)},r)}}},43:function(r,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=e(44);e.d(t,"TreeView",function(){return n.a})},44:function(r,t,e){"use strict";var n=e(45);e.d(t,"a",function(){return n.a})},45:function(r,t,e){"use strict";function n(r,t){var e={};for(var n in r)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n]);return e}e.d(t,"a",function(){return p});var o=e(1),s=(e.n(o),e(0)),i=(e.n(s),e(46)),a=e(17),u=Object.assign||function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n])}return r},c={name:"TreeView",props:["model","category","selection","onSelect","display","search","transition","strategies","labels","css","dragndrop","sort","disabled","openerOpts","async","keyUpListener","keyDownListener","unique"],data:function(){return{searchInput:"",filtered:null}},methods:{onSearch:function(r){var t=r.currentTarget.value;this.$data.searchInput=t,this.$data.filtered=this.rootNode.filterTree(t)}},computed:{computedModel:function(){return this.$props.sort?this.$props.model.sort(this.$props.sort):this.$props.model},wrapDragNDrop:function(){return this.rootNode.wrapDragNDrop()}},created:function(){var r=this,t={get:function(){return u({},s.defaults,Object(o.object)(r.$props).filter(function(r){return!!r}))}},e={onSelect:this.$props.onSelect,onDrag:this.$props.dragndrop&&this.$props.dragndrop.drag,onOver:this.$props.dragndrop&&this.$props.dragndrop.over,onEnter:this.$props.dragndrop&&this.$props.dragndrop.enter,onLeave:this.$props.dragndrop&&this.$props.dragndrop.leave,onDrop:this.$props.dragndrop&&this.$props.dragndrop.drop,onCancel:this.$props.dragndrop&&this.$props.dragndrop.cancel},n={get:function(){return u({},r.$data)},set:function(t){for(var e in t)e in r.$data&&(r.$data[e]=t[e])}};this.rootNode=new s.RootNode(t,e,n,this.$forceUpdate)},mounted:function(){this.keyUpListener.subscribe(this.rootNode.onKey),this.keyDownListener.subscribe(this.rootNode.onKey)},render:function(){var r=arguments[0],t=Object(o.object)(this.$props).filter(function(r){return!!r}),e=(t.onSelect,t.sort),a=(t.model,n(t,["onSelect","sort","model"])),c={props:u({},s.defaults,a,{model:this.computedModel,filteredModel:this.$data.filtered,onSelect:this.rootNode.onSelect,dragndrop:this.wrapDragNDrop,ancestors:[],sort:e,folded:!1,searched:!!this.$data.searchInput.trim()})},p=this.$props.search?r("input",{attrs:{type:"search",placeholder:this.$props.labels&&this.$props.labels["search.placeholder"]},class:this.rootNode.mixCss("search"),domProps:{value:this.$data.searchInput},on:{input:this.onSearch}},[]):null;return r("div",{class:this.rootNode.mixCss("TreeView")},[p,r(i.a,c,[])])}},p=Object(a.a)(Object(a.b)(s.defaults.labels),Object(a.c)({eventType:"keyup",prop:"keyUpListener",autoMount:!0}),Object(a.c)({eventType:"keydown",prop:"keyDownListener",autoMount:!0}))(c)},46:function(r,t,e){"use strict";function n(r){if(Array.isArray(r)){for(var t=0,e=Array(r.length);t<r.length;t++)e[t]=r[t];return e}return Array.from(r)}e.d(t,"a",function(){return d});var o=e(16),s=e.n(o),i=e(1),a=(e.n(i),e(0)),u=(e.n(a),e(17)),c=Object.assign||function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n])}return r},p={name:"TreeViewNode",created:function(){var r=this,t={get:function(){return r.$props}},e={get:function(){return r.$data},set:function(t){for(var e in t)e in r.$data&&(r.$data[e]=t[e])}};this.node=new a.TreeNode(t,{},e,function(){r._unmounted||r.$forceUpdate()})},beforeDestroy:function(){this._unmounted=!0},props:["model","category","selection","onSelect","display","strategies","dragndrop","labels","sort","disabled","openerOpts","async","css","folded","transition","unique","loading","depth","ancestors","searched","onSelect","filteredModel"],data:function(){return{unfolded:[]}},computed:{childrenModel:function(){var r=this,t=new Map;return this.$props.model.forEach(function(e){r.node.hasChildren(e)&&!r.node.isAsync(e)&&t.set(e,r.$props.sort?e[r.$props.category].sort(r.$props.sort):e[r.$props.category])}),t},rootDragData:function(){var r=this.node.getDragEvents(null,!this.$props.depth);return c({attrs:{draggable:r.draggable}},Object(i.object)(r).nestPrefix("on",function(r){return r.toLowerCase()}))}},render:function(){var r=this,t=arguments[0],e=function(e){if(!r.node.hasChildren(e)&&!r.node.isAsync(e))return null;var o=null;!r.node.isAsync(e)||r.node.isFolded(e)||Object(i.array)(r.node.pending).contains(e)||r.node.unwrapPromise(e),r.$props.filteredModel&&(o=r.$props.filteredModel.get(e));var s={props:c({},r.$props,{model:r.childrenModel.get(e),filteredModel:o,ancestors:[].concat(n(r.$props.ancestors),[e]),depth:(r.$props.depth||0)+1,folded:r.node.isFolded(e),loading:r.node.isAsync(e)&&!r.node.isFolded(e)})};return t(d,s,[])},o=function(e,n){return function(o){return(r.node.hasChildren(e)||r.node.isAsync(e))&&r.$props.openerOpts.position===o?t(n,{class:r.node.mixCss("opener"),on:{click:r.node.onOpener(e)}},[]):null}},a=this.$props,u=a.model,p=a.folded,l=a.display,f=a.loading;if(p)return null;if(f)return t("span",null,[]);var h=this.$props.opener||"span",g=u.filter(function(t){return!r.$props.searched||r.$props.filteredModel&&r.$props.filteredModel.has(t)}).map(function(n,s){var a=c({},r.node.getDragEvents(n),{class:r.node.liCss(n)}),u=c({attrs:{draggable:a.draggable}},Object(i.object)(a).nestPrefix("on",function(r){return r.toLowerCase()}));return r.$props.unique&&(u.key=r.$props.unique(n,s)),t("li",u,[t("span",{class:r.node.mixCss("item"),on:{click:r.node.onClick(n)}},[o(n,h)("left"),l&&l(n,r.$props),o(n,h)("right")]),e(n)])});return t("ul",s()([{class:this.node.ulCss()},this.rootDragData]),[g])}},d=Object(u.d)({key:function(r){return r.folded||r.loading}})(p)},47:function(r,t,e){"use strict";function n(r){if(Array.isArray(r)){for(var t=0,e=Array(r.length);t<r.length;t++)e[t]=r[t];return e}return Array.from(r)}e.d(t,"a",function(){return s});var o=Object.assign||function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n])}return r},s=function(r){return function(t){return{name:"withLabels-"+t.name,props:t.props?[].concat(n(t.props)):[],render:function(){var e=arguments[0],n={props:o({},this.$props,{labels:o({},r,this.$props.labels)})};return e(t,n,[])}}}}},48:function(r,t,e){"use strict";function n(r){if(Array.isArray(r)){for(var t=0,e=Array(r.length);t<r.length;t++)e[t]=r[t];return e}return Array.from(r)}e.d(t,"a",function(){return a});var o=e(16),s=e.n(o),i=Object.assign||function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n])}return r},a=function(r){var t=r.key;return function(r){return{name:"withTransition-"+r.name,props:r.props?[].concat(n(r.props)):[],render:function(){var e=arguments[0],n={props:i({},this.$props)},o=i({},this.transition);return this.transition?e("transition",o,[e(r,s()([n,{key:t(this.$props)}]),[])]):e(r,n,[])}}}}},49:function(r,t,e){"use strict";function n(r,t,e){return t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function o(r){if(Array.isArray(r)){for(var t=0,e=Array(r.length);t<r.length;t++)e[t]=r[t];return e}return Array.from(r)}e.d(t,"a",function(){return i});var s=Object.assign||function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n])}return r},i=function(r){var t=r.eventType,e=void 0===t?"click":t,i=r.prop,a=void 0===i?"listener":i,u=r.mountOn,c=void 0===u?null:u,p=r.autoMount,d=void 0!==p&&p,l=r.regulate,f=void 0!==l&&l;return function(r){return{name:"withListener-"+r.name,props:r.props?[].concat(o(r.props)):[],created:function(){d&&this.mount(this)},beforeDestroy:function(){this.unmount()},beforeUpdate:function(){c&&(c(this.$props)?this.mount(this):this.unmount())},data:function(){return{listening:!1,ticking:!1,callback:null}},methods:{subscribe:function(r){this.callback=r},onEvent:function(r){var t=this;if(this.callback)if(f){if(!this.ticking){var e=this.callback;window.requestAnimationFrame(function(){return e(r,function(){t.ticking=!1})})}this.ticking=!0}else this.callback(r)},mount:function(){this.listening||(document.addEventListener(e,this.onEvent),this.listening=!0)},unmount:function(){this.listening&&(document.removeEventListener(e,this.onEvent),this.listening=!1)}},render:function(){var t=arguments[0],e=n({},a,{subscribe:this.subscribe,mount:this.mount,unmount:this.unmount}),o={props:s({},this.$props,e)};return t(r,o,[])}}}}}})});
//# sourceMappingURL=vue.umd.min.js.map